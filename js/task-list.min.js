{let e=document.querySelector(".task-list"),t=document.querySelector(".remove-list"),n=JSON.parse(localStorage.getItem("tasks")),l=[];if(null!==n)for(let e=0;e<n.length;e++)l.push(n[e]);console.log(l);let o=JSON.parse(localStorage.getItem("tasksChecked")),r=[];if(null!==o)for(let e=0;e<o.length;e++)r.push(o[e]);if(0!=l.length)for(let t=0;t<l.length;t++)e.appendChild(handlerNewTaskBody(l[t]));if(0!=r.length)for(let e=0;e<r.length;e++){let n=handlerNewTaskBody(r[e]);n.querySelector("input").checked=!0,t.appendChild(n)}function handlerNewTaskBody(n,o){if(""!==n){let c=newTask(n),a=c.querySelector(".task-list__change-btn"),s=c.querySelector(".task-list__task-name"),i=c.querySelector(".task-list__input-box");i.addEventListener("change",(function(n){let o=function(e,t){for(let n=0;n<t.length;n++)if(1==t[n].includes(s.textContent)){e.push(s.textContent),t.splice([n],1);let o=JSON.stringify(r);localStorage.setItem("tasksChecked",o);let c=JSON.stringify(l);localStorage.setItem("tasks",c)}};i.checked?(o(r,l),t.appendChild(c)):(o(l,r),e.appendChild(c)),console.log(l),console.log(r)}));let u=function(n){a.addEventListener(n,(function(o){if(null==document.querySelector(".change-popup")){let o=newPopup(s.textContent,!1);o.classList.remove("change-popup--hidden");let a=o.querySelector(".change-popup__field"),i=o.querySelector(".change-popup__save-btn"),u=o.querySelector(".change-popup__remove-btn"),d=()=>{let n=function(e,t){for(let n=0;n<e.length;n++)if(1==e[n].includes(s.textContent)){e.splice([n],1),s.textContent=a.value,e.splice([n],0,s.textContent);let l=JSON.stringify(e);localStorage.setItem(t,l)}};c.parentNode==e?n(l,"tasks"):c.parentNode==t&&n(r,"tasksChecked"),o.remove()};a.addEventListener("change",d),i.addEventListener(n,d),u.addEventListener(n,(function(){let n=function(e,t){for(let n=0;n<e.length;n++)if(1==e[n].includes(s.textContent)){e.splice([n],1);let l=JSON.stringify(e);localStorage.setItem(t,l)}};c.parentNode==e?n(l,"tasks"):c.parentNode==t&&n(r,"tasksChecked"),c.remove(),o.remove()}))}}))};if(u("click"),u("touchstart"),o){o.push(s.textContent);const e=JSON.stringify(o);localStorage.setItem("tasks",e)}return c}}let c=document.querySelector(".task-list__field"),a=document.querySelector(".task-list__btn"),s=function(e){a.addEventListener(e,(function(){handlerNewTaskBody(c.value,l),c.value=""}))};s("click"),s("touchstart"),c.addEventListener("keydown",(function(e){"Enter"==e.key&&(handlerNewTaskBody(c.value,l),c.value="")}));let i=document.querySelector(".menu-list__button--remove-all"),u=document.querySelector(".menu-list__button--remove-done"),d=document.querySelector(".menu-list__button--clear-all"),h=function(e){i.addEventListener(e,(function(){let e=document.querySelector(".task-list").children,t=document.querySelector(".remove-list").children;for(let t=e.length-1;t>-1;t--)e[t].remove();for(let e=t.length-1;e>-1;e--)t[e].remove();l=[],localStorage.setItem("tasks",JSON.stringify(l)),r=[],localStorage.setItem("tasksChecked",JSON.stringify(r)),localStorage.setItem("captionName",""),document.querySelector(".main-name__caption").textContent="Название списка"})),u.addEventListener(e,(function(){let e=document.querySelector(".remove-list").children;for(let t=e.length-1;t>-1;t--)e[t].remove();r=[];let t=JSON.stringify(r);localStorage.setItem("tasksChecked",t)})),d.addEventListener(e,(function(){localStorage.clear()}))};h("click"),h("touchstart")}